{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/94272/Desktop/Job/my-personal_website/crop_image_web/Roundblock_Takehome_front/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/94272/Desktop/Job/my-personal_website/crop_image_web/Roundblock_Takehome_front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/94272/Desktop/Job/my-personal_website/crop_image_web/Roundblock_Takehome_front/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useRef}from\"react\";import\"./index.scss\";import{Card,Form,Button,message,Upload,Popover}from\"antd\";import{InboxOutlined}from\"@ant-design/icons\";import ReactCrop from\"react-image-crop\";import\"react-image-crop/dist/ReactCrop.css\";import{createZipFromImage}from\"@/utils\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Home=function Home(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),image=_useState2[0],setImage=_useState2[1];var _useState3=useState({aspect:1,unit:\"%\"}),_useState4=_slicedToArray(_useState3,2),crop=_useState4[0],setCrop=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),croppedImage=_useState6[0],setCroppedImage=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),src=_useState8[0],setSrc=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),completedCrop=_useState10[0],setCompletedCrop=_useState10[1];var imageRef=useRef(null);var _useState11=useState(0),_useState12=_slicedToArray(_useState11,2),uploadPercentage=_useState12[0],setUploadPercentage=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),isUploading=_useState14[0],setIsUploading=_useState14[1];var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(info){var zip,formData;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!(croppedImage===null)){_context.next=3;break;}message.error(\"哎哟，你干嘛哎哟，请先完成裁剪啦\");return _context.abrupt(\"return\");case 3:_context.prev=3;setIsUploading(true);_context.next=7;return createZipFromImage(croppedImage);case 7:zip=_context.sent;formData=new FormData();formData.append(\"file\",zip,\"image.zip\");_context.next=12;return uploadFileWithProgress(formData,function(percentage){setUploadPercentage(percentage);});case 12:message.success(\"上传成功\");_context.next=19;break;case 15:_context.prev=15;_context.t0=_context[\"catch\"](3);console.error(_context.t0);message.error(\"上传失败，请重试\");case 19:_context.prev=19;setIsUploading(false);setUploadPercentage(0);return _context.finish(19);case 23:case\"end\":return _context.stop();}},_callee,null,[[3,15,19,23]]);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();// 裁剪图片\nvar cropImageNow=function cropImageNow(){var image_HTML=new Image();image_HTML.src=src;var canvas=document.createElement('canvas');console.log(\"src\",src);console.log(\"canvas\",canvas);console.log(\"image\",image);var scaleX=image_HTML.naturalWidth/imageRef.current.clientWidth;var scaleY=image_HTML.naturalHeight/imageRef.current.clientHeight;console.log(\"scaleX\",scaleX);console.log(\"image_HTML.naturalWidth\",image_HTML.naturalWidth);console.log(\"image_HTML.width\",image_HTML.width);console.log(\"scaleY\",scaleY);canvas.width=crop.width;canvas.height=crop.height;var ctx=canvas.getContext('2d');var pixelRatio=window.devicePixelRatio;canvas.width=crop.width*pixelRatio;canvas.height=crop.height*pixelRatio;ctx.setTransform(pixelRatio,0,0,pixelRatio,0,0);ctx.imageSmoothingQuality='high';console.log(\"crop\",crop);console.log(\"image_HTML\",image_HTML);ctx.drawImage(image_HTML,crop.x*scaleX,crop.y*scaleY,crop.width*scaleX,crop.height*scaleY,0,0,crop.width,crop.height);// Converting to base64\nvar base64Image=canvas.toDataURL('image/jpeg');setCroppedImage(base64Image);console.log(\"base64Image\",base64Image);};// 本地上传之前检查图片\nvar checkLocalUpload=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(file){var confirmResult;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:if(!(!file||!file.type.startsWith('image/'))){_context2.next=3;break;}message.error('请选择一个图片文件。');return _context2.abrupt(\"return\",false);case 3:if(!(image!==null)){_context2.next=9;break;}confirmResult=window.confirm('前一个图片尚未上传，您确定要放弃之前的编辑和更改吗？');if(confirmResult){_context2.next=7;break;}return _context2.abrupt(\"return\",false);case 7:setCroppedImage(null);// 清空之前的图片\nsetCrop(null);// 清空之前的裁剪信息\ncase 9:return _context2.abrupt(\"return\",true);case 10:case\"end\":return _context2.stop();}},_callee2);}));return function checkLocalUpload(_x2){return _ref2.apply(this,arguments);};}();// 本地上传\nvar handleBeforeUpload=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(file){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.next=2;return checkLocalUpload(file);case 2:if(!_context3.sent){_context3.next=8;break;}setSrc(URL.createObjectURL(file));setImage(file);console.log(\"local upload success\");_context3.next=9;break;case 8:console.log(\"local upload failed\",image);case 9:return _context3.abrupt(\"return\",false);case 10:case\"end\":return _context3.stop();}},_callee3);}));return function handleBeforeUpload(_x3){return _ref3.apply(this,arguments);};}();// 上传到后端\nvar uploadFileWithProgress=function uploadFileWithProgress(formData,onUploadProgress){return new Promise(function(resolve,reject){var xhr=new XMLHttpRequest();xhr.open(\"POST\",\"http://54.180.149.62:8080/files/upload\");// 服务器用\n//xhr.open(\"POST\", \"http://localhost:8080/files/upload\"); // 本地测试用\nxhr.upload.onprogress=function(event){if(event.lengthComputable){var percentage=Math.round(event.loaded*100/event.total);onUploadProgress(percentage);}};xhr.onload=function(event){if(xhr.status>=200&&xhr.status<300){resolve(xhr.responseText);}else{reject(new Error(\"Upload failed with status: \"+xhr.statusText));}};xhr.onerror=function(){reject(new Error(\"Upload failed with status: \"+xhr.statusText));};xhr.send(formData);});};// 下载最新的文件\nvar downloadLatestFile=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(){var response,blob,url,link;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:_context4.prev=0;_context4.next=3;return fetch('http://54.180.149.62:8080/files/download',{method:'GET'});case 3:response=_context4.sent;/*\r\n      const response = await fetch('http://localhost:8080/files/download', {\r\n        method: 'GET',\r\n      });\r\n      */console.log(\"response\",response);if(response.ok){_context4.next=7;break;}throw new Error(\"HTTP error! status: \".concat(response.status));case 7:_context4.next=9;return response.blob();case 9:blob=_context4.sent;url=window.URL.createObjectURL(blob);link=document.createElement('a');link.href=url;link.setAttribute('download','example.zip');// Use a dynamic name based on your requirements\ndocument.body.appendChild(link);link.click();document.body.removeChild(link);_context4.next=23;break;case 19:_context4.prev=19;_context4.t0=_context4[\"catch\"](0);console.error(\"Downloading file failed:\",_context4.t0);message.error(\"下载失败，请重试\");case 23:case\"end\":return _context4.stop();}},_callee4,null,[[0,19]]);}));return function downloadLatestFile(){return _ref4.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:\"outer-container\",children:/*#__PURE__*/_jsx(Card,{title:\"\\u56FE\\u7247\\u526A\\u88C1\",className:\"home-container\",children:/*#__PURE__*/_jsxs(Form,{layout:\"vertical\",children:[image?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Card,{className:\"crop-container\",children:/*#__PURE__*/_jsxs(Form.Item,{label:\"\\u88C1\\u526A\\u56FE\\u7247\",className:\"image-center\",children:[/*#__PURE__*/_jsx(ReactCrop,{src:src,onImageLoaded:setImage,crop:crop,onChange:function onChange(c){return setCrop(c);},onComplete:function onComplete(c){return setCompletedCrop(c);},children:/*#__PURE__*/_jsx(Form.Item,{children:/*#__PURE__*/_jsx(\"img\",{className:\"image-center\",src:src,ref:imageRef})})}),/*#__PURE__*/_jsx(Form.Item,{children:/*#__PURE__*/_jsx(Button,{className:\"submit-button\",onClick:cropImageNow,children:\"\\u88C1\\u526A\"})})]})}),croppedImage&&/*#__PURE__*/_jsx(Card,{className:\"crop-container\",children:/*#__PURE__*/_jsx(Form.Item,{label:\"\\u9884\\u89C8\",className:\"image-center\",children:/*#__PURE__*/_jsx(\"img\",{src:croppedImage,alt:\"\\u88C1\\u526A\\u540E\\u7684\\u56FE\\u7247\"})})})]}):/*#__PURE__*/_jsx(\"p\",{className:\"image-center\",children:\"\\u8BF7\\u5728\\u4E0B\\u65B9\\u4E0A\\u4F20\\u56FE\\u7247\"}),/*#__PURE__*/_jsx(Form.Item,{label:\"\\u4E0A\\u4F20\\u56FE\\u7247\",children:/*#__PURE__*/_jsxs(Upload.Dragger,{accept:\"image/*\",showUploadList:false,beforeUpload:handleBeforeUpload,onRemove:function onRemove(file){console.log(\"onRemove\",file);setSrc(null);setImage(null);},children:[/*#__PURE__*/_jsx(\"p\",{className:\"ant-upload-drag-icon\",children:/*#__PURE__*/_jsx(InboxOutlined,{})}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u70B9\\u51FB\\u8FD9\\u91CC\\u6216\\u8005\\u62D6\\u62FD\\u56FE\\u7247\\u5230\\u6B64\\u5904\\u4E0A\\u4F20\"})]})}),/*#__PURE__*/_jsx(Form.Item,{children:/*#__PURE__*/_jsx(Button,{className:\"submit-button\",onClick:handleSubmit,type:\"primary\",children:\"\\u4E0A\\u4F20\\u56FE\\u7247\"})}),/*#__PURE__*/_jsx(Form.Item,{children:/*#__PURE__*/_jsx(Button,{className:\"submit-button\",onClick:downloadLatestFile,type:\"primary\",children:\"\\u4E0B\\u8F7D\\u6587\\u4EF6\"})})]})})});};export default Home;","map":{"version":3,"names":["React","useState","useRef","Card","Form","Button","message","Upload","Popover","InboxOutlined","ReactCrop","createZipFromImage","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Home","_useState","_useState2","_slicedToArray","image","setImage","_useState3","aspect","unit","_useState4","crop","setCrop","_useState5","_useState6","croppedImage","setCroppedImage","_useState7","_useState8","src","setSrc","_useState9","_useState10","completedCrop","setCompletedCrop","imageRef","_useState11","_useState12","uploadPercentage","setUploadPercentage","_useState13","_useState14","isUploading","setIsUploading","handleSubmit","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","info","zip","formData","wrap","_callee$","_context","prev","next","error","abrupt","sent","FormData","append","uploadFileWithProgress","percentage","success","t0","console","finish","stop","_x","apply","arguments","cropImageNow","image_HTML","Image","canvas","document","createElement","log","scaleX","naturalWidth","current","clientWidth","scaleY","naturalHeight","clientHeight","width","height","ctx","getContext","pixelRatio","window","devicePixelRatio","setTransform","imageSmoothingQuality","drawImage","x","y","base64Image","toDataURL","checkLocalUpload","_ref2","_callee2","file","confirmResult","_callee2$","_context2","type","startsWith","confirm","_x2","handleBeforeUpload","_ref3","_callee3","_callee3$","_context3","URL","createObjectURL","_x3","onUploadProgress","Promise","resolve","reject","xhr","XMLHttpRequest","open","upload","onprogress","event","lengthComputable","Math","round","loaded","total","onload","status","responseText","Error","statusText","onerror","send","downloadLatestFile","_ref4","_callee4","response","blob","url","link","_callee4$","_context4","fetch","method","ok","concat","href","setAttribute","body","appendChild","click","removeChild","className","children","title","layout","Item","label","onImageLoaded","onChange","c","onComplete","ref","onClick","alt","Dragger","accept","showUploadList","beforeUpload","onRemove"],"sources":["C:/Users/94272/Desktop/Job/my-personal_website/crop_image_web/Roundblock_Takehome_front/src/pages/Home/index.js"],"sourcesContent":["import React, { useState, useRef } from \"react\";\r\nimport \"./index.scss\";\r\nimport { Card, Form, Button, message, Upload, Popover } from \"antd\";\r\nimport { InboxOutlined } from \"@ant-design/icons\";\r\nimport ReactCrop from \"react-image-crop\";\r\nimport \"react-image-crop/dist/ReactCrop.css\";\r\nimport { createZipFromImage } from \"@/utils\";\r\n\r\n\r\n\r\nconst Home = () => {\r\n  const [image, setImage] = useState(null);\r\n  const [crop, setCrop] = useState({ aspect: 1, unit: \"%\" });\r\n  const [croppedImage, setCroppedImage] = useState(null);\r\n  const [src, setSrc] = useState(null);\r\n  const [completedCrop, setCompletedCrop] = useState(null);\r\n  const imageRef = useRef(null);\r\n  const [uploadPercentage, setUploadPercentage] = useState(0);\r\n  const [isUploading, setIsUploading] = useState(false);\r\n\r\n\r\n  const handleSubmit = async (info) => {\r\n    if (croppedImage === null) {\r\n      message.error(\"哎哟，你干嘛哎哟，请先完成裁剪啦\");\r\n      return;\r\n    }\r\n    try {\r\n      setIsUploading(true);\r\n      const zip = await createZipFromImage(croppedImage);\r\n  \r\n      const formData = new FormData();\r\n      formData.append(\"file\", zip, \"image.zip\");\r\n  \r\n      await uploadFileWithProgress(formData, (percentage) => {\r\n        setUploadPercentage(percentage);\r\n      });\r\n  \r\n      message.success(\"上传成功\");\r\n    } catch (error) {\r\n      console.error(error);\r\n      message.error(\"上传失败，请重试\");\r\n    } finally {\r\n      setIsUploading(false);\r\n      setUploadPercentage(0);\r\n    }\r\n  };\r\n  \r\n\r\n  // 裁剪图片\r\n  const cropImageNow = () => {\r\n    const image_HTML = new Image();\r\n    image_HTML.src = src;\r\n\r\n    const canvas = document.createElement('canvas');\r\n    console.log(\"src\",src);\r\n    console.log(\"canvas\",canvas);\r\n    console.log(\"image\",image);\r\n    \r\n    const scaleX = image_HTML.naturalWidth / imageRef.current.clientWidth;\r\n    const scaleY = image_HTML.naturalHeight / imageRef.current.clientHeight;\r\n    console.log(\"scaleX\",scaleX)\r\n    console.log(\"image_HTML.naturalWidth\",image_HTML.naturalWidth)\r\n    console.log(\"image_HTML.width\",image_HTML.width)\r\n    console.log(\"scaleY\",scaleY)\r\n    canvas.width = crop.width;\r\n    canvas.height = crop.height;\r\n    const ctx = canvas.getContext('2d');\r\n\r\n    const pixelRatio = window.devicePixelRatio;\r\n    canvas.width = crop.width * pixelRatio;\r\n    canvas.height = crop.height * pixelRatio;\r\n    ctx.setTransform(pixelRatio, 0, 0, pixelRatio, 0, 0);\r\n    ctx.imageSmoothingQuality = 'high';\r\n    \r\n    console.log(\"crop\",crop)\r\n    \r\n    \r\n\r\n    console.log(\"image_HTML\",image_HTML);\r\n    ctx.drawImage(\r\n      image_HTML,\r\n      crop.x * scaleX,\r\n      crop.y * scaleY,\r\n      crop.width * scaleX,\r\n      crop.height * scaleY,\r\n      0,\r\n      0,\r\n      crop.width,\r\n      crop.height,\r\n    );\r\n\r\n    // Converting to base64\r\n    const base64Image = canvas.toDataURL('image/jpeg');\r\n    setCroppedImage(base64Image);\r\n    console.log(\"base64Image\",base64Image);\r\n  };\r\n\r\n  // 本地上传之前检查图片\r\n  const checkLocalUpload = async (file) => {\r\n    if (!file || !file.type.startsWith('image/')) {\r\n      message.error('请选择一个图片文件。');\r\n      return false;\r\n    }\r\n  \r\n    // 检查是否已经有图片存在并且尚未提交到后端，要求用户确认是否放弃之前的更改\r\n    if (image !== null) {\r\n      const confirmResult = window.confirm('前一个图片尚未上传，您确定要放弃之前的编辑和更改吗？');\r\n      if (!confirmResult) {\r\n        return false;\r\n      }\r\n      setCroppedImage(null);  // 清空之前的图片\r\n      setCrop(null); // 清空之前的裁剪信息\r\n    }\r\n\r\n    return true;\r\n  };\r\n\r\n  // 本地上传\r\n  const handleBeforeUpload = async (file) => {\r\n    if (await checkLocalUpload(file)) {\r\n      setSrc(URL.createObjectURL(file));\r\n      setImage(file);\r\n      console.log(\"local upload success\");\r\n    } else {\r\n      console.log(\"local upload failed\", image);\r\n    }\r\n    return false;\r\n  };\r\n\r\n\r\n  // 上传到后端\r\n  const uploadFileWithProgress = (formData, onUploadProgress) => {\r\n    return new Promise((resolve, reject) => {\r\n      const xhr = new XMLHttpRequest();\r\n  \r\n      xhr.open(\"POST\", \"http://54.180.149.62:8080/files/upload\");  // 服务器用\r\n      //xhr.open(\"POST\", \"http://localhost:8080/files/upload\"); // 本地测试用\r\n  \r\n      xhr.upload.onprogress = (event) => {\r\n        if (event.lengthComputable) {\r\n          const percentage = Math.round((event.loaded * 100) / event.total);\r\n          onUploadProgress(percentage);\r\n        }\r\n      };\r\n  \r\n      xhr.onload = (event) => {\r\n        if (xhr.status >= 200 && xhr.status < 300) {\r\n          resolve(xhr.responseText);\r\n        } else {\r\n          reject(new Error(\"Upload failed with status: \" + xhr.statusText));\r\n        }\r\n      };\r\n  \r\n      xhr.onerror = () => {\r\n        reject(new Error(\"Upload failed with status: \" + xhr.statusText));\r\n      };\r\n  \r\n      xhr.send(formData);\r\n    });\r\n  };\r\n  \r\n  // 下载最新的文件\r\n  const downloadLatestFile = async () => {\r\n    try {\r\n      \r\n      const response = await fetch('http://54.180.149.62:8080/files/download', {\r\n        method: 'GET',\r\n      });\r\n      \r\n      /*\r\n      const response = await fetch('http://localhost:8080/files/download', {\r\n        method: 'GET',\r\n      });\r\n      */\r\n      console.log(\"response\",response);\r\n      if (!response.ok) {\r\n        throw new Error(`HTTP error! status: ${response.status}`);\r\n      }\r\n      \r\n      const blob = await response.blob();\r\n      const url = window.URL.createObjectURL(blob);\r\n      const link = document.createElement('a');\r\n      link.href = url;\r\n      link.setAttribute('download', 'example.zip'); // Use a dynamic name based on your requirements\r\n      document.body.appendChild(link);\r\n      link.click();\r\n      document.body.removeChild(link);\r\n    } catch (error) {\r\n      console.error(\"Downloading file failed:\", error);\r\n      message.error(\"下载失败，请重试\");\r\n    }\r\n  };\r\n  \r\n  return (\r\n    <div className=\"outer-container\">\r\n      <Card title=\"图片剪裁\" className=\"home-container\">\r\n        <Form layout=\"vertical\">\r\n          {image ? (\r\n            <>\r\n              <Card className=\"crop-container\">\r\n                <Form.Item label=\"裁剪图片\" className=\"image-center\">\r\n                  <ReactCrop src={src} onImageLoaded={setImage} crop={crop} onChange={(c) => setCrop(c)} onComplete={(c) => setCompletedCrop(c)}>\r\n                    <Form.Item >\r\n                      <img  className= \"image-center\" src={src} ref={imageRef}/>\r\n                    </Form.Item>\r\n                  </ReactCrop>\r\n\r\n                  <Form.Item>\r\n                    <Button className=\"submit-button\" onClick={cropImageNow}>\r\n                      裁剪\r\n                    </Button>\r\n                  </Form.Item>\r\n                  \r\n                </Form.Item>\r\n              </Card>\r\n              {croppedImage && (\r\n                <Card className=\"crop-container\">\r\n                  <Form.Item label=\"预览\" className=\"image-center\">\r\n                    <img src={croppedImage} alt=\"裁剪后的图片\" />\r\n                  </Form.Item>\r\n                </Card>\r\n              )}\r\n              \r\n            </>\r\n          ) : (\r\n            <p className=\"image-center\">请在下方上传图片</p>\r\n          )}\r\n  \r\n          <Form.Item label=\"上传图片\">\r\n            <Upload.Dragger\r\n              accept=\"image/*\"\r\n              showUploadList={false}\r\n              beforeUpload={handleBeforeUpload}\r\n              onRemove={(file) => {\r\n                console.log(\"onRemove\", file);\r\n                setSrc(null);\r\n                setImage(null);\r\n              }}\r\n            >\r\n              <p className=\"ant-upload-drag-icon\">\r\n                <InboxOutlined />\r\n              </p>\r\n              <p>点击这里或者拖拽图片到此处上传</p>\r\n            </Upload.Dragger>\r\n          </Form.Item>\r\n  \r\n          <Form.Item>\r\n            <Button className=\"submit-button\" onClick={handleSubmit} type=\"primary\">\r\n              上传图片\r\n            </Button>\r\n          </Form.Item>\r\n          <Form.Item>\r\n            <Button className=\"submit-button\" onClick={downloadLatestFile} type=\"primary\">\r\n              下载文件\r\n            </Button>\r\n          </Form.Item>\r\n          \r\n\r\n        </Form>\r\n      </Card>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Home;\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}