{"ast":null,"code":"// audioUtils.js\nimport { message } from 'antd';\nimport { Configuration, OpenAIApi } from 'openai';\nimport FormData from 'form-data';\nclass CustomFormData extends FormData {\n  getHeaders() {\n    return {};\n  }\n}\nconst processAudioFile = async (audioFile, apiKey, createTranscription) => {\n  const configuration = new Configuration({\n    apiKey,\n    formDataCtor: CustomFormData\n  });\n  delete configuration.baseOptions.headers['User-Agent'];\n  const openai = new OpenAIApi(configuration);\n  if (audioFile) {\n    const formData = new FormData();\n    formData.append('file', audioFile, audioFile.name);\n    const audioTranscription = await createTranscription(audioFile, 'whisper-1');\n    return audioTranscription.data.text;\n  }\n};\nconst handleAudioUpload = async (audioList, apiStore, openai, content, t) => {\n  let audio_text = '';\n  if (audioList.length > 0) {\n    console.log(audioList[0]);\n    const audioFile = audioList[0];\n    audio_text = await processAudioFile(audioFile, apiStore.apiKey, openai.createTranscription);\n  } else if (!content) {\n    message.error(t('nothingError'));\n    return;\n  }\n  return audio_text;\n};\nexport { processAudioFile, handleAudioUpload };","map":{"version":3,"names":["message","Configuration","OpenAIApi","FormData","CustomFormData","getHeaders","processAudioFile","audioFile","apiKey","createTranscription","configuration","formDataCtor","baseOptions","headers","openai","formData","append","name","audioTranscription","data","text","handleAudioUpload","audioList","apiStore","content","t","audio_text","length","console","log","error"],"sources":["C:/Users/94272/Desktop/Job/my-personal_website/beattather/src/utils/processAudio.js"],"sourcesContent":["// audioUtils.js\r\nimport { message } from 'antd';\r\n\r\nimport { Configuration, OpenAIApi } from 'openai';\r\nimport FormData from 'form-data';\r\n\r\nclass CustomFormData extends FormData {\r\n  getHeaders() {\r\n    return {};\r\n  }\r\n}\r\n\r\nconst processAudioFile = async (audioFile, apiKey, createTranscription) => {\r\n  const configuration = new Configuration({\r\n    apiKey,\r\n    formDataCtor: CustomFormData,\r\n  });\r\n\r\n  delete configuration.baseOptions.headers['User-Agent'];\r\n  const openai = new OpenAIApi(configuration);\r\n\r\n  if (audioFile) {\r\n    const formData = new FormData();\r\n    formData.append('file', audioFile, audioFile.name);\r\n\r\n    const audioTranscription = await createTranscription(audioFile, 'whisper-1');\r\n    return audioTranscription.data.text;\r\n  }\r\n};\r\n\r\nconst handleAudioUpload = async (audioList, apiStore, openai, content, t) => {\r\n  let audio_text = '';\r\n\r\n  if (audioList.length > 0) {\r\n    console.log(audioList[0]);\r\n    const audioFile = audioList[0];\r\n\r\n    audio_text = await processAudioFile(audioFile, apiStore.apiKey, openai.createTranscription);\r\n  } else if (!content) {\r\n    message.error(t('nothingError'));\r\n    return;\r\n  }\r\n\r\n  return audio_text;\r\n};\r\n\r\nexport { processAudioFile, handleAudioUpload };\r\n"],"mappings":"AAAA;AACA,SAASA,OAAO,QAAQ,MAAM;AAE9B,SAASC,aAAa,EAAEC,SAAS,QAAQ,QAAQ;AACjD,OAAOC,QAAQ,MAAM,WAAW;AAEhC,MAAMC,cAAc,SAASD,QAAQ,CAAC;EACpCE,UAAUA,CAAA,EAAG;IACX,OAAO,CAAC,CAAC;EACX;AACF;AAEA,MAAMC,gBAAgB,GAAG,MAAAA,CAAOC,SAAS,EAAEC,MAAM,EAAEC,mBAAmB,KAAK;EACzE,MAAMC,aAAa,GAAG,IAAIT,aAAa,CAAC;IACtCO,MAAM;IACNG,YAAY,EAAEP;EAChB,CAAC,CAAC;EAEF,OAAOM,aAAa,CAACE,WAAW,CAACC,OAAO,CAAC,YAAY,CAAC;EACtD,MAAMC,MAAM,GAAG,IAAIZ,SAAS,CAACQ,aAAa,CAAC;EAE3C,IAAIH,SAAS,EAAE;IACb,MAAMQ,QAAQ,GAAG,IAAIZ,QAAQ,EAAE;IAC/BY,QAAQ,CAACC,MAAM,CAAC,MAAM,EAAET,SAAS,EAAEA,SAAS,CAACU,IAAI,CAAC;IAElD,MAAMC,kBAAkB,GAAG,MAAMT,mBAAmB,CAACF,SAAS,EAAE,WAAW,CAAC;IAC5E,OAAOW,kBAAkB,CAACC,IAAI,CAACC,IAAI;EACrC;AACF,CAAC;AAED,MAAMC,iBAAiB,GAAG,MAAAA,CAAOC,SAAS,EAAEC,QAAQ,EAAET,MAAM,EAAEU,OAAO,EAAEC,CAAC,KAAK;EAC3E,IAAIC,UAAU,GAAG,EAAE;EAEnB,IAAIJ,SAAS,CAACK,MAAM,GAAG,CAAC,EAAE;IACxBC,OAAO,CAACC,GAAG,CAACP,SAAS,CAAC,CAAC,CAAC,CAAC;IACzB,MAAMf,SAAS,GAAGe,SAAS,CAAC,CAAC,CAAC;IAE9BI,UAAU,GAAG,MAAMpB,gBAAgB,CAACC,SAAS,EAAEgB,QAAQ,CAACf,MAAM,EAAEM,MAAM,CAACL,mBAAmB,CAAC;EAC7F,CAAC,MAAM,IAAI,CAACe,OAAO,EAAE;IACnBxB,OAAO,CAAC8B,KAAK,CAACL,CAAC,CAAC,cAAc,CAAC,CAAC;IAChC;EACF;EAEA,OAAOC,UAAU;AACnB,CAAC;AAED,SAASpB,gBAAgB,EAAEe,iBAAiB"},"metadata":{},"sourceType":"module","externalDependencies":[]}