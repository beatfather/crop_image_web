{"ast":null,"code":"var _s = $RefreshSig$();\n// audioUtils.js\nimport { message } from 'antd';\nimport { Configuration, OpenAIApi } from 'openai';\nimport FormData from 'form-data';\nimport { useTranslation } from 'react-i18next';\nclass CustomFormData extends FormData {\n  getHeaders() {\n    return {};\n  }\n}\nconst handleAudioUpload = async file => {\n  _s();\n  const {\n    t\n  } = useTranslation();\n  const isAudio = file.type.startsWith('audio');\n  const maxFileSize = 25 * 1024 * 1024; // 25 MB\n\n  if (isAudio && audioList.length < 1 && file.size <= maxFileSize) {\n    return true;\n  }\n\n  // 如果文件不是音频格式\n  else if (!isAudio) {\n    message.error(t('upload.TypeError'));\n    return false;\n  }\n\n  // 如果已经上传了一个文件\n  else if (audioList.length > 0) {\n    message.warning(t('upload.NumError'));\n    return false;\n  }\n\n  // 如果文件大小超过限制\n  else if (file.size > maxFileSize) {\n    message.error(t('upload.SizeError'));\n    return false;\n  }\n};\n_s(handleAudioUpload, \"zlIdU9EjM2llFt74AbE2KsUJXyM=\", false, function () {\n  return [useTranslation];\n});\nexport { handleAudioUpload };","map":{"version":3,"names":["message","Configuration","OpenAIApi","FormData","useTranslation","CustomFormData","getHeaders","handleAudioUpload","file","_s","t","isAudio","type","startsWith","maxFileSize","audioList","length","size","error","warning"],"sources":["C:/Users/94272/Desktop/Job/my-personal_website/beattather/src/utils/processAudio.js"],"sourcesContent":["// audioUtils.js\r\nimport { message } from 'antd';\r\n\r\nimport { Configuration, OpenAIApi } from 'openai';\r\nimport FormData from 'form-data';\r\nimport { useTranslation } from 'react-i18next';\r\nclass CustomFormData extends FormData {\r\n  getHeaders() {\r\n    return {};\r\n  }\r\n}\r\n\r\nconst handleAudioUpload = async (file) => {\r\n    const { t } = useTranslation();\r\n    const isAudio = file.type.startsWith('audio');\r\n    const maxFileSize = 25 * 1024 * 1024; // 25 MB\r\n\r\n    if (isAudio && audioList.length < 1 && file.size <= maxFileSize) {\r\n      return true;\r\n    }\r\n\r\n    // 如果文件不是音频格式\r\n    else if (!isAudio) {\r\n      message.error(t('upload.TypeError'));\r\n      return false;\r\n    }\r\n\r\n    // 如果已经上传了一个文件\r\n    else if (audioList.length > 0) {\r\n      message.warning(t('upload.NumError'));\r\n      return false;\r\n    }\r\n    \r\n    // 如果文件大小超过限制\r\n    else if (file.size > maxFileSize) {\r\n      message.error(t('upload.SizeError'));\r\n      return false;\r\n    }\r\n};\r\n\r\nexport { handleAudioUpload };\r\n"],"mappings":";AAAA;AACA,SAASA,OAAO,QAAQ,MAAM;AAE9B,SAASC,aAAa,EAAEC,SAAS,QAAQ,QAAQ;AACjD,OAAOC,QAAQ,MAAM,WAAW;AAChC,SAASC,cAAc,QAAQ,eAAe;AAC9C,MAAMC,cAAc,SAASF,QAAQ,CAAC;EACpCG,UAAUA,CAAA,EAAG;IACX,OAAO,CAAC,CAAC;EACX;AACF;AAEA,MAAMC,iBAAiB,GAAG,MAAOC,IAAI,IAAK;EAAAC,EAAA;EACtC,MAAM;IAAEC;EAAE,CAAC,GAAGN,cAAc,EAAE;EAC9B,MAAMO,OAAO,GAAGH,IAAI,CAACI,IAAI,CAACC,UAAU,CAAC,OAAO,CAAC;EAC7C,MAAMC,WAAW,GAAG,EAAE,GAAG,IAAI,GAAG,IAAI,CAAC,CAAC;;EAEtC,IAAIH,OAAO,IAAII,SAAS,CAACC,MAAM,GAAG,CAAC,IAAIR,IAAI,CAACS,IAAI,IAAIH,WAAW,EAAE;IAC/D,OAAO,IAAI;EACb;;EAEA;EAAA,KACK,IAAI,CAACH,OAAO,EAAE;IACjBX,OAAO,CAACkB,KAAK,CAACR,CAAC,CAAC,kBAAkB,CAAC,CAAC;IACpC,OAAO,KAAK;EACd;;EAEA;EAAA,KACK,IAAIK,SAAS,CAACC,MAAM,GAAG,CAAC,EAAE;IAC7BhB,OAAO,CAACmB,OAAO,CAACT,CAAC,CAAC,iBAAiB,CAAC,CAAC;IACrC,OAAO,KAAK;EACd;;EAEA;EAAA,KACK,IAAIF,IAAI,CAACS,IAAI,GAAGH,WAAW,EAAE;IAChCd,OAAO,CAACkB,KAAK,CAACR,CAAC,CAAC,kBAAkB,CAAC,CAAC;IACpC,OAAO,KAAK;EACd;AACJ,CAAC;AAACD,EAAA,CA1BIF,iBAAiB;EAAA,QACLH,cAAc;AAAA;AA2BhC,SAASG,iBAAiB"},"metadata":{},"sourceType":"module","externalDependencies":[]}