{"ast":null,"code":"// tokenCountHelper.js\n\nconst tokenCounter = textArray => {\n  let text = textArray[textArray.length - 1].content;\n  console.log(\"in counter text\", text);\n  const CHINESE_CHARACTER_REGEX = /[\\u4e00-\\u9fff]/;\n\n  // 计算英文单词数量\n  const wordCount = text.split(/\\s+/).filter(word => !CHINESE_CHARACTER_REGEX.test(word)).length;\n\n  // 计算中文字符数量\n  const chineseCharacterCount = Array.from(text).reduce((count, char) => {\n    if (CHINESE_CHARACTER_REGEX.test(char)) {\n      count += 2;\n    }\n    return count;\n  }, 0);\n  console.log(\"word number\", wordCount + chineseCharacterCount);\n  return wordCount + chineseCharacterCount;\n};\nexport { tokenCounter };","map":{"version":3,"names":["tokenCounter","textArray","text","length","content","console","log","CHINESE_CHARACTER_REGEX","wordCount","split","filter","word","test","chineseCharacterCount","Array","from","reduce","count","char"],"sources":["C:/Users/94272/Desktop/Job/my-personal_website/beattather/src/utils/tokenCounter.js"],"sourcesContent":["// tokenCountHelper.js\r\n\r\nconst tokenCounter = (textArray) => {\r\n  let text = textArray[textArray.length - 1].content;\r\n  console.log(\"in counter text\",text);\r\n  const CHINESE_CHARACTER_REGEX = /[\\u4e00-\\u9fff]/;\r\n\r\n  // 计算英文单词数量\r\n  const wordCount = text.split(/\\s+/)\r\n    .filter(word => !CHINESE_CHARACTER_REGEX.test(word))\r\n    .length;\r\n\r\n  // 计算中文字符数量\r\n  const chineseCharacterCount = Array.from(text).reduce((count, char) => {\r\n    if (CHINESE_CHARACTER_REGEX.test(char)) {\r\n      count += 2;\r\n    }\r\n    return count;\r\n  }, 0);\r\n  console.log(\"word number\",wordCount + chineseCharacterCount);\r\n  return wordCount + chineseCharacterCount;\r\n};\r\n\r\nexport {tokenCounter};\r\n"],"mappings":"AAAA;;AAEA,MAAMA,YAAY,GAAIC,SAAS,IAAK;EAClC,IAAIC,IAAI,GAAGD,SAAS,CAACA,SAAS,CAACE,MAAM,GAAG,CAAC,CAAC,CAACC,OAAO;EAClDC,OAAO,CAACC,GAAG,CAAC,iBAAiB,EAACJ,IAAI,CAAC;EACnC,MAAMK,uBAAuB,GAAG,iBAAiB;;EAEjD;EACA,MAAMC,SAAS,GAAGN,IAAI,CAACO,KAAK,CAAC,KAAK,CAAC,CAChCC,MAAM,CAACC,IAAI,IAAI,CAACJ,uBAAuB,CAACK,IAAI,CAACD,IAAI,CAAC,CAAC,CACnDR,MAAM;;EAET;EACA,MAAMU,qBAAqB,GAAGC,KAAK,CAACC,IAAI,CAACb,IAAI,CAAC,CAACc,MAAM,CAAC,CAACC,KAAK,EAAEC,IAAI,KAAK;IACrE,IAAIX,uBAAuB,CAACK,IAAI,CAACM,IAAI,CAAC,EAAE;MACtCD,KAAK,IAAI,CAAC;IACZ;IACA,OAAOA,KAAK;EACd,CAAC,EAAE,CAAC,CAAC;EACLZ,OAAO,CAACC,GAAG,CAAC,aAAa,EAACE,SAAS,GAAGK,qBAAqB,CAAC;EAC5D,OAAOL,SAAS,GAAGK,qBAAqB;AAC1C,CAAC;AAED,SAAQb,YAAY"},"metadata":{},"sourceType":"module","externalDependencies":[]}